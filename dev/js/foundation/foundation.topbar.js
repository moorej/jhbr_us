(function(c,b,a,d){Foundation.libs.topbar={name:"topbar",version:"4.3.2",settings:{index:0,stickyClass:"sticky",custom_back_text:true,back_text:"Back",is_hover:true,mobile_show_parent_link:false,scrolltop:true,init:false},init:function(g,h,f){Foundation.inherit(this,"data_options addCustomRule");var e=this;if(typeof h==="object"){c.extend(true,this.settings,h)}else{if(typeof f!=="undefined"){c.extend(true,this.settings,f)}}if(typeof h!=="string"){c(".top-bar, [data-topbar]").each(function(){c.extend(true,e.settings,e.data_options(c(this)));e.settings.$w=c(b);e.settings.$topbar=c(this);e.settings.$section=e.settings.$topbar.find("section");e.settings.$titlebar=e.settings.$topbar.children("ul").first();e.settings.$topbar.data("index",0);var j=e.settings.$topbar.parent();if(j.hasClass("fixed")||j.hasClass(e.settings.stickyClass)){e.settings.$topbar.data("height",e.outerHeight(j));e.settings.$topbar.data("stickyoffset",j.offset().top)}else{e.settings.$topbar.data("height",e.outerHeight(e.settings.$topbar))}var i=c("<div class='top-bar-js-breakpoint'/>").insertAfter(e.settings.$topbar);e.settings.breakPoint=i.width();i.remove();e.assemble();if(e.settings.is_hover){e.settings.$topbar.find(".has-dropdown").addClass("not-click")}e.addCustomRule(".f-topbar-fixed { padding-top: "+e.settings.$topbar.data("height")+"px }");if(e.settings.$topbar.parent().hasClass("fixed")){c("body").addClass("f-topbar-fixed")}});if(!e.settings.init){this.events()}return this.settings.init}else{return this[h].call(this,f)}},toggle:function(){var e=this;var g=c(".top-bar, [data-topbar]"),f=g.find("section, .section");if(e.breakpoint()){if(!e.rtl){f.css({left:"0%"});f.find(">.name").css({left:"100%"})}else{f.css({right:"0%"});f.find(">.name").css({right:"100%"})}f.find("li.moved").removeClass("moved");g.data("index",0);g.toggleClass("expanded").css("height","")}if(e.settings.scrolltop){if(!g.hasClass("expanded")){if(g.hasClass("fixed")){g.parent().addClass("fixed");g.removeClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(g.parent().hasClass("fixed")){if(e.settings.scrolltop){g.parent().removeClass("fixed");g.addClass("fixed");c("body").removeClass("f-topbar-fixed");b.scrollTo(0,0)}else{g.parent().removeClass("expanded")}}}}else{if(g.parent().hasClass(e.settings.stickyClass)){g.parent().addClass("fixed")}if(g.parent().hasClass("fixed")){if(!g.hasClass("expanded")){g.removeClass("fixed");g.parent().removeClass("expanded");e.updateStickyPositioning()}else{g.addClass("fixed");g.parent().addClass("expanded")}}}},timer:null,events:function(){var e=this;c(this.scope).off(".fndtn.topbar").on("click.fndtn.topbar",".top-bar .toggle-topbar, [data-topbar] .toggle-topbar",function(f){f.preventDefault();e.toggle()}).on("click.fndtn.topbar",".top-bar li.has-dropdown",function(i){var f=c(this),h=c(i.target),g=f.closest("[data-topbar], .top-bar"),j=g.data("topbar");if(h.data("revealId")){e.toggle();return}if(e.breakpoint()){return}if(e.settings.is_hover&&!Modernizr.touch){return}i.stopImmediatePropagation();if(h[0].nodeName==="A"&&h.parent().hasClass("has-dropdown")){i.preventDefault()}if(f.hasClass("hover")){f.removeClass("hover").find("li").removeClass("hover");f.parents("li.hover").removeClass("hover")}else{f.addClass("hover")}}).on("click.fndtn.topbar",".top-bar .has-dropdown>a, [data-topbar] .has-dropdown>a",function(g){if(e.breakpoint()&&c(b).width()!=e.settings.breakPoint){g.preventDefault();var f=c(this),k=f.closest(".top-bar, [data-topbar]"),i=k.find("section, .section"),h=f.next(".dropdown").outerHeight(),j=f.closest("li");k.data("index",k.data("index")+1);j.addClass("moved");if(!e.rtl){i.css({left:-(100*k.data("index"))+"%"});i.find(">.name").css({left:100*k.data("index")+"%"})}else{i.css({right:-(100*k.data("index"))+"%"});i.find(">.name").css({right:100*k.data("index")+"%"})}k.css("height",e.outerHeight(f.siblings("ul"),true)+e.settings.$topbar.data("height"))}});c(b).on("resize.fndtn.topbar",function(){if(typeof e.settings.$topbar==="undefined"){return}var h=e.settings.$topbar.parent("."+this.settings.stickyClass);var f;if(!e.breakpoint()){var g=e.settings.$topbar.hasClass("expanded");c(".top-bar, [data-topbar]").css("height","").removeClass("expanded").find("li").removeClass("hover");if(g){e.toggle()}}if(h.length>0){if(h.hasClass("fixed")){h.removeClass("fixed");f=h.offset().top;if(c(a.body).hasClass("f-topbar-fixed")){f-=e.settings.$topbar.data("height")}e.settings.$topbar.data("stickyoffset",f);h.addClass("fixed")}else{f=h.offset().top;e.settings.$topbar.data("stickyoffset",f)}}}.bind(this));c("body").on("click.fndtn.topbar",function(g){var f=c(g.target).closest("li").closest("li.hover");if(f.length>0){return}c(".top-bar li, [data-topbar] li").removeClass("hover")});c(this.scope).on("click.fndtn",".top-bar .has-dropdown .back, [data-topbar] .has-dropdown .back",function(g){g.preventDefault();var f=c(this),k=f.closest(".top-bar, [data-topbar]"),i=k.find("section, .section"),h=f.closest("li.moved"),j=h.parent();k.data("index",k.data("index")-1);if(!e.rtl){i.css({left:-(100*k.data("index"))+"%"});i.find(">.name").css({left:100*k.data("index")+"%"})}else{i.css({right:-(100*k.data("index"))+"%"});i.find(">.name").css({right:100*k.data("index")+"%"})}if(k.data("index")===0){k.css("height","")}else{k.css("height",e.outerHeight(j,true)+e.settings.$topbar.data("height"))}setTimeout(function(){h.removeClass("moved")},300)})},breakpoint:function(){return c(a).width()<=this.settings.breakPoint||c("html").hasClass("lt-ie9")},assemble:function(){var e=this;this.settings.$section.detach();this.settings.$section.find(".has-dropdown>a").each(function(){var f=c(this),i=f.siblings(".dropdown"),g=f.attr("href");if(e.settings.mobile_show_parent_link&&g&&g.length>1){var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li><li><a class="parent-link js-generated" href="'+g+'">'+f.text()+"</a></li>")}else{var h=c('<li class="title back js-generated"><h5><a href="#"></a></h5></li>')}if(e.settings.custom_back_text==true){h.find("h5>a").html(e.settings.back_text)}else{h.find("h5>a").html("&laquo; "+f.html())}i.prepend(h)});this.settings.$section.appendTo(this.settings.$topbar);this.sticky()},height:function(e){var f=0,g=this;e.find("> li").each(function(){f+=g.outerHeight(c(this),true)});return f},sticky:function(){var f=c(b),e=this;f.scroll(function(){e.updateStickyPositioning()})},updateStickyPositioning:function(){var g="."+this.settings.stickyClass;var e=c(b);if(c(g).length>0){var f=this.settings.$topbar.data("stickyoffset");if(!c(g).hasClass("expanded")){if(e.scrollTop()>(f)){if(!c(g).hasClass("fixed")){c(g).addClass("fixed");c("body").addClass("f-topbar-fixed")}}else{if(e.scrollTop()<=f){if(c(g).hasClass("fixed")){c(g).removeClass("fixed");c("body").removeClass("f-topbar-fixed")}}}}}},off:function(){c(this.scope).off(".fndtn.topbar");c(b).off(".fndtn.topbar")},reflow:function(){}}}(Foundation.zj,this,this.document));